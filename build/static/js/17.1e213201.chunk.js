"use strict";(self.webpackChunkpg_api_frontend=self.webpackChunkpg_api_frontend||[]).push([[17],{5017:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});r(5043);var a=r(461),o=r(6058),n=r(1121),l=r(579);a.t1.register(a.PP,a.kc,a.E8,a.No,a.FN,a.hE,a.m_,a.s$,a.A6,a.ZT);const d=e=>{let{loggerName:t,loggerData:r}=e;const a={labels:r.map((e=>(0,n.GP)(new Date(e.date),"MM/dd"))),datasets:[{type:"bar",label:"Current",data:r.map((e=>e.currentPower||0)),backgroundColor:"rgba(75, 192, 192, 0.8)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{type:"line",label:"Last Month",data:r.map((e=>e.lastMonthPower||0)),backgroundColor:"rgba(153, 102, 255, 1)",borderColor:"rgba(153, 102, 255, 1)",tension:.4},{type:"line",label:"Year-Ago Month",data:r.map((e=>e.prevYearPower||0)),backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",tension:.4},{type:"line",label:"Year-Ago Month Average",data:r.map((e=>e.averagePowerGen||0)),backgroundColor:"rgb(2, 250, 35)",borderColor:"rgb(2, 250, 35)",tension:.4}]};return(0,l.jsx)("div",{style:{width:"100%",maxWidth:"600px",height:"300px",margin:"0 auto"},children:(0,l.jsx)(o.t1,{type:"bar",data:a,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Power Generation (kW)"}}}}})})},s=e=>{let{currentMonthsData:t={},previousYearSameMonthData:r={},sameYearLastMonthData:a={}}=e;const o=Object.keys(t).reduce(((e,o)=>{const n=t[o]||[],l=r[o]||[],d=a[o]||[],s=l.reduce(((e,t)=>e+parseFloat(t.power_gen)),0),i=l.length,p=i>0?s/i:0,g=new Map(l.map((e=>[new Date(e.date).getDate(),parseFloat(e.power_gen)]))),h=new Map(d.map((e=>[new Date(e.date).getDate(),parseFloat(e.power_gen)]))),c=n.map((e=>{const t=new Date(e.date),r=t.getDate();return{date:`${t.getMonth()+1}/${r}/${t.getFullYear()}`,loggerName:o,currentPower:parseFloat(e.power_gen),lastMonthPower:h.get(r)||null,prevYearPower:g.get(r)||null,averagePowerGen:p.toFixed(2)||null}}));return e[o]=c,e}),{}),n={tableContainer:{borderRadius:"8px",backgroundColor:"#f9f9f9",margin:"20px auto",padding:"10px"},table:{width:"100%",borderCollapse:"collapse"},th:{border:"1px solid #ddd",backgroundColor:"#afd1f3",padding:"10px",textAlign:"center"},td:{border:"1px solid #ddd",padding:"10px",textAlign:"center",verticalAlign:"middle"}};return(0,l.jsx)("div",{style:n.tableContainer,className:"table-bordered",children:(0,l.jsxs)("table",{style:n.table,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:n.th,children:"SN"}),(0,l.jsx)("th",{style:n.th,children:"Logger Name"}),(0,l.jsx)("th",{style:n.th,children:"Graph"}),(0,l.jsx)("th",{style:{...n.th,width:"300px"},colSpan:"2",children:"Summary"})]})}),(0,l.jsx)("tbody",{children:Object.keys(o).map(((e,t)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{style:n.td,children:t+1}),(0,l.jsx)("td",{style:n.td,children:e}),(0,l.jsx)("td",{style:n.td,children:(0,l.jsx)(d,{loggerName:e,loggerData:o[e]})}),(0,l.jsx)("td",{style:{...n.td,width:"300px"},colSpan:"2"})]},e)))})]})})}}}]);
//# sourceMappingURL=17.1e213201.chunk.js.map